<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PSG Financial Services ‚Äî AI Teardown</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  :root {
    --navy: #07111f;
    --navy-mid: #0f1e35;
    --navy-light: #162d4e;
    --gold: #c9a84c;
    --gold-dim: rgba(201,168,76,0.15);
    --cream: #e8e0d0;
    --white: #ffffff;
    --muted: #7a8ea8;
    --green: #3dbf82;
    --border: rgba(255,255,255,0.07);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--navy);
    color: var(--cream);
    font-family: 'DM Sans', sans-serif;
    font-weight: 300;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    padding: 20px 7%;
    display: flex; justify-content: space-between; align-items: center;
    background: rgba(7,17,31,0.85);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }
  .nav-logo { font-family: 'Playfair Display', serif; font-size: 18px; color: var(--white); letter-spacing: 1px; }
  .nav-logo span { color: var(--gold); }
  .nav-tag { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
  .nav-ask-btn {
    background: var(--gold); color: var(--navy); border: none;
    padding: 8px 20px; font-size: 12px; font-weight: 500;
    letter-spacing: 1px; text-transform: uppercase;
    cursor: pointer; border-radius: 2px; transition: opacity 0.2s;
    font-family: 'DM Sans', sans-serif;
  }
  .nav-ask-btn:hover { opacity: 0.85; }

  /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
  .hero {
    min-height: 100vh; display: flex; flex-direction: column;
    justify-content: flex-end; padding: 0 7% 80px;
    position: relative; overflow: hidden;
    padding-top: 120px;
  }
  .hero-bg {
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 80% 60% at 70% 30%, rgba(201,168,76,0.06) 0%, transparent 60%),
                radial-gradient(ellipse 50% 80% at 10% 80%, rgba(22,45,78,0.8) 0%, transparent 60%);
    pointer-events: none;
  }
  .hero-grid-line {
    position: absolute; top: 0; bottom: 0;
    width: 1px; background: var(--border); pointer-events: none;
  }
  .hero-eyebrow {
    font-size: 11px; letter-spacing: 4px; text-transform: uppercase;
    color: var(--gold); margin-bottom: 24px;
    opacity: 0; animation: fadeUp 0.6s ease forwards 0.3s;
  }
  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(52px, 9vw, 104px); font-weight: 900;
    line-height: 0.95; color: var(--white);
    opacity: 0; animation: fadeUp 0.8s ease forwards 0.5s;
  }
  .hero h1 em { color: var(--gold); font-style: normal; }
  .hero-desc {
    margin-top: 28px; max-width: 520px;
    font-size: 17px; line-height: 1.75; color: var(--muted);
    opacity: 0; animation: fadeUp 0.8s ease forwards 0.7s;
  }
  .hero-stats {
    display: flex; gap: 0; margin-top: 56px; flex-wrap: wrap;
    opacity: 0; animation: fadeUp 0.8s ease forwards 0.9s;
    border: 1px solid var(--border); border-radius: 4px; overflow: hidden;
    max-width: 720px;
  }
  .hstat {
    flex: 1; min-width: 160px; padding: 24px 28px;
    border-right: 1px solid var(--border);
    background: rgba(15,30,53,0.6);
  }
  .hstat:last-child { border-right: none; }
  .hstat .hl { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
  .hstat .hv { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: 700; color: var(--white); }
  .hstat .hc { font-size: 12px; color: var(--green); margin-top: 4px; }

  /* ‚îÄ‚îÄ‚îÄ SECTIONS ‚îÄ‚îÄ‚îÄ */
  .section { padding: 100px 7%; border-top: 1px solid var(--border); }
  .s-label { font-size: 10px; letter-spacing: 4px; text-transform: uppercase; color: var(--gold); margin-bottom: 14px; }
  .s-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(30px, 4.5vw, 50px); font-weight: 700;
    color: var(--white); line-height: 1.1; margin-bottom: 52px; max-width: 640px;
  }

  /* ‚îÄ‚îÄ‚îÄ METRICS ‚îÄ‚îÄ‚îÄ */
  .metrics-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1px; background: var(--border);
    border: 1px solid var(--border); border-radius: 4px; overflow: hidden; margin-bottom: 52px;
  }
  .mc {
    background: var(--navy-mid); padding: 32px 28px;
    transition: background 0.3s;
  }
  .mc:hover { background: var(--navy-light); }
  .mc .ml { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); margin-bottom: 10px; }
  .mc .mv { font-family: 'Playfair Display', serif; font-size: 32px; font-weight: 700; color: var(--white); }
  .mc .mx { font-size: 12px; margin-top: 8px; }
  .mc .mx.up { color: var(--green); }
  .mc .mx.flat { color: var(--muted); }

  /* ‚îÄ‚îÄ‚îÄ CHARTS ‚îÄ‚îÄ‚îÄ */
  .charts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  @media(max-width:768px){ .charts-grid { grid-template-columns: 1fr; } }
  .cc {
    background: var(--navy-mid); border: 1px solid var(--border);
    border-radius: 4px; padding: 28px;
  }
  .cc h3 { font-size: 12px; letter-spacing: 1px; text-transform: uppercase; color: var(--muted); margin-bottom: 20px; }
  .cc canvas { max-height: 220px; }

  /* ‚îÄ‚îÄ‚îÄ DIVISIONS ‚îÄ‚îÄ‚îÄ */
  .div-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; }
  @media(max-width:900px){ .div-grid { grid-template-columns: 1fr; } }
  .dcard {
    background: var(--navy-mid); border: 1px solid var(--border);
    border-radius: 4px; padding: 36px 28px; position: relative;
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .dcard:hover { transform: translateY(-5px); box-shadow: 0 24px 48px rgba(0,0,0,0.35); }
  .dcard::after {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, var(--gold), transparent);
  }
  .dcard .dico { font-size: 28px; margin-bottom: 16px; }
  .dcard h3 { font-family: 'Playfair Display', serif; font-size: 20px; color: var(--white); margin-bottom: 10px; }
  .dcard p { font-size: 13px; color: var(--muted); line-height: 1.75; margin-bottom: 20px; }
  .dcard .dstat { font-size: 22px; font-weight: 500; color: var(--gold); }
  .dcard .dsub { font-size: 11px; color: var(--muted); margin-top: 3px; }

  /* ‚îÄ‚îÄ‚îÄ AI INSIGHTS PANEL ‚îÄ‚îÄ‚îÄ */
  .ai-insights-section { background: var(--navy-mid); }
  .ai-insight-trigger {
    display: flex; align-items: center; gap: 12px;
    background: none; border: 1px solid var(--border);
    color: var(--gold); padding: 12px 20px;
    font-size: 12px; letter-spacing: 1.5px; text-transform: uppercase;
    cursor: pointer; border-radius: 2px; margin-bottom: 32px;
    font-family: 'DM Sans', sans-serif; transition: all 0.3s;
  }
  .ai-insight-trigger:hover { background: var(--gold-dim); border-color: var(--gold); }
  .ai-insight-trigger .ai-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--gold); animation: pulse 2s infinite;
  }
  .insights-container {
    display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
  }
  @media(max-width:768px){ .insights-container { grid-template-columns: 1fr; } }
  .insight-card {
    background: var(--navy); border: 1px solid var(--border);
    border-radius: 4px; padding: 28px; position: relative; min-height: 160px;
  }
  .insight-card .ic-num {
    font-family: 'Playfair Display', serif; font-size: 56px; font-weight: 900;
    color: var(--gold-dim); position: absolute; top: 12px; right: 20px; line-height: 1;
    color: rgba(201,168,76,0.1);
  }
  .insight-card h4 { font-size: 13px; font-weight: 500; color: var(--gold); margin-bottom: 10px; }
  .insight-card p { font-size: 13px; color: var(--muted); line-height: 1.8; }
  .insight-skeleton {
    background: linear-gradient(90deg, var(--navy-light) 25%, var(--navy-mid) 50%, var(--navy-light) 75%);
    background-size: 200% 100%; animation: shimmer 1.5s infinite;
    border-radius: 3px; height: 12px; margin-bottom: 8px;
  }

  /* ‚îÄ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ‚îÄ */
  .chat-overlay {
    position: fixed; inset: 0; z-index: 200;
    background: rgba(7,17,31,0.92); backdrop-filter: blur(8px);
    display: none; align-items: center; justify-content: center; padding: 24px;
  }
  .chat-overlay.open { display: flex; }
  .chat-box {
    background: var(--navy-mid); border: 1px solid var(--border);
    border-radius: 6px; width: 100%; max-width: 680px;
    max-height: 85vh; display: flex; flex-direction: column;
    box-shadow: 0 40px 80px rgba(0,0,0,0.6);
  }
  .chat-header {
    padding: 20px 24px; border-bottom: 1px solid var(--border);
    display: flex; justify-content: space-between; align-items: center;
  }
  .chat-header-left { display: flex; align-items: center; gap: 12px; }
  .chat-ai-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; }
  .chat-header h3 { font-size: 14px; font-weight: 500; color: var(--white); }
  .chat-header p { font-size: 11px; color: var(--muted); margin-top: 2px; }
  .chat-close {
    background: none; border: none; color: var(--muted); font-size: 22px;
    cursor: pointer; padding: 4px; line-height: 1; transition: color 0.2s;
  }
  .chat-close:hover { color: var(--white); }
  .chat-messages { flex: 1; overflow-y: auto; padding: 24px; display: flex; flex-direction: column; gap: 16px; }
  .chat-messages::-webkit-scrollbar { width: 4px; }
  .chat-messages::-webkit-scrollbar-track { background: transparent; }
  .chat-messages::-webkit-scrollbar-thumb { background: var(--navy-light); border-radius: 2px; }
  .msg { display: flex; gap: 12px; max-width: 92%; }
  .msg.user { align-self: flex-end; flex-direction: row-reverse; }
  .msg-avatar {
    width: 32px; height: 32px; border-radius: 50%; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center; font-size: 13px;
  }
  .msg.ai .msg-avatar { background: var(--gold-dim); border: 1px solid rgba(201,168,76,0.3); color: var(--gold); }
  .msg.user .msg-avatar { background: var(--navy-light); border: 1px solid var(--border); color: var(--muted); }
  .msg-bubble {
    padding: 12px 16px; border-radius: 4px; font-size: 14px; line-height: 1.7;
  }
  .msg.ai .msg-bubble { background: var(--navy); color: var(--cream); border: 1px solid var(--border); }
  .msg.user .msg-bubble { background: var(--navy-light); color: var(--cream); }
  .msg-bubble.typing { display: flex; gap: 6px; align-items: center; padding: 16px; }
  .typing-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--muted); animation: typingBounce 1.2s infinite; }
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
  .chat-suggestions { padding: 0 24px 16px; display: flex; gap: 8px; flex-wrap: wrap; }
  .suggestion-chip {
    background: none; border: 1px solid var(--border); color: var(--muted);
    padding: 6px 14px; border-radius: 20px; font-size: 12px; cursor: pointer;
    font-family: 'DM Sans', sans-serif; transition: all 0.2s;
  }
  .suggestion-chip:hover { border-color: var(--gold); color: var(--gold); background: var(--gold-dim); }
  .chat-input-row {
    padding: 16px 24px; border-top: 1px solid var(--border);
    display: flex; gap: 12px; align-items: flex-end;
  }
  .chat-input {
    flex: 1; background: var(--navy); border: 1px solid var(--border);
    color: var(--cream); padding: 12px 16px; font-size: 14px;
    border-radius: 4px; font-family: 'DM Sans', sans-serif;
    resize: none; outline: none; max-height: 120px; line-height: 1.5;
    transition: border-color 0.2s;
  }
  .chat-input:focus { border-color: rgba(201,168,76,0.4); }
  .chat-input::placeholder { color: var(--muted); }
  .chat-send {
    background: var(--gold); border: none; color: var(--navy);
    width: 42px; height: 42px; border-radius: 4px; cursor: pointer;
    font-size: 18px; display: flex; align-items: center; justify-content: center;
    transition: opacity 0.2s; flex-shrink: 0;
  }
  .chat-send:hover { opacity: 0.85; }
  .chat-send:disabled { opacity: 0.4; cursor: not-allowed; }

  /* ‚îÄ‚îÄ‚îÄ CONCLUSION ‚îÄ‚îÄ‚îÄ */
  .conclusion {
    text-align: center; padding: 100px 7%;
    background: var(--navy-mid); border-top: 1px solid var(--border);
  }
  .conclusion blockquote {
    font-family: 'Playfair Display', serif;
    font-size: clamp(20px, 3vw, 32px); font-weight: 400; font-style: italic;
    color: var(--white); max-width: 780px; margin: 0 auto 28px; line-height: 1.55;
  }
  .conclusion blockquote span { color: var(--gold); }
  .conclusion cite { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); font-style: normal; }

  footer {
    padding: 32px 7%; border-top: 1px solid var(--border);
    display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;
  }
  footer p { font-size: 12px; color: var(--muted); }
  footer a { color: var(--gold); text-decoration: none; }

  /* ‚îÄ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ‚îÄ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.85); }
  }
  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  @keyframes typingBounce {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-5px); }
  }
  .fade-in { opacity: 0; transform: translateY(18px); transition: opacity 0.7s ease, transform 0.7s ease; }
  .fade-in.visible { opacity: 1; transform: translateY(0); }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div>
    <div class="nav-logo">PSG <span>Teardown</span></div>
    <div class="nav-tag" style="margin-top:3px">AI-Powered Analysis ¬∑ 2026</div>
  </div>
  <button class="nav-ask-btn" onclick="openChat()">‚ú¶ Ask the Analyst</button>
</nav>

<!-- HERO -->
<div class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid-line" style="left:33%"></div>
  <div class="hero-grid-line" style="left:66%"></div>

  <div class="hero-eyebrow">Business Intelligence Report ¬∑ PSG Financial Services ¬∑ JSE:KST</div>
  <h1>Dissecting<br><em>PSG.</em></h1>
  <p class="hero-desc">An interactive, AI-assisted teardown of South Africa's leading advice-based financial services group ‚Äî covering growth, strategy, and where the real opportunities lie.</p>

  <div class="hero-stats">
    <div class="hstat">
      <div class="hl">AUM FY2025</div>
      <div class="hv">R470.7B</div>
      <div class="hc">‚Üë 16% year-on-year</div>
    </div>
    <div class="hstat">
      <div class="hl">Recurring Earnings</div>
      <div class="hv">R1.27B</div>
      <div class="hc">‚Üë 23% year-on-year</div>
    </div>
    <div class="hstat">
      <div class="hl">Return on Equity</div>
      <div class="hv">26.6%</div>
      <div class="hc">‚Üë from 23.4% in FY2024</div>
    </div>
    <div class="hstat">
      <div class="hl">Adviser Offices</div>
      <div class="hv">260+</div>
      <div class="hc">Across SA & Namibia</div>
    </div>
  </div>
</div>

<!-- PERFORMANCE -->
<section class="section">
  <div class="s-label">Financial Performance</div>
  <div class="s-title fade-in">13 consecutive years<br>of earnings growth.</div>

  <div class="metrics-grid fade-in">
    <div class="mc"><div class="ml">FY2025 Gross Written Premiums</div><div class="mv">R7.6B</div><div class="mx up">‚Üë 9% over FY2024</div></div>
    <div class="mc"><div class="ml">FY2024 Core Revenue</div><div class="mv">R5.91B</div><div class="mx up">‚Üë 10.5% year-on-year</div></div>
    <div class="mc"><div class="ml">Net Client Inflows FY2024</div><div class="mv">R23B</div><div class="mx flat">New & existing clients</div></div>
    <div class="mc"><div class="ml">5-Year Revenue CAGR</div><div class="mv">12.4%</div><div class="mx flat">Consistent outperformance</div></div>
    <div class="mc"><div class="ml">Dividend Growth FY2024</div><div class="mv">+17%</div><div class="mx up">Reflects earnings confidence</div></div>
    <div class="mc"><div class="ml">Tech & Infra Spend Growth</div><div class="mv">+13%</div><div class="mx flat">Fully expensed annually</div></div>
  </div>

  <div class="charts-grid fade-in">
    <div class="cc"><h3>Revenue (R millions)</h3><canvas id="revChart"></canvas></div>
    <div class="cc"><h3>Assets Under Management (R billions)</h3><canvas id="aumChart"></canvas></div>
    <div class="cc"><h3>Recurring Headline Earnings (R millions)</h3><canvas id="earnChart"></canvas></div>
    <div class="cc"><h3>Return on Equity (%)</h3><canvas id="roeChart"></canvas></div>
  </div>
</section>

<!-- DIVISIONS -->
<section class="section">
  <div class="s-label">Business Model</div>
  <div class="s-title fade-in">Three divisions.<br>One shared philosophy.</div>
  <div class="div-grid fade-in">
    <div class="dcard">
      <div class="dico">üíº</div>
      <h3>PSG Wealth</h3>
      <p>The core division. Investment, retirement, stockbroking, estate planning, and fiduciary services ‚Äî all anchored in long-term adviser-client relationships.</p>
      <div class="dstat">R355.1B</div><div class="dsub">AUM ¬∑ ‚Üë16% FY2024</div>
    </div>
    <div class="dcard">
      <div class="dico">üìà</div>
      <h3>PSG Asset Management</h3>
      <p>Contrarian, long-term single-managed funds. Five Raging Bull Awards in 2023, including 2nd place SA Manager of the Year ‚Äî evidence of consistent fund performance.</p>
      <div class="dstat">R51.8B</div><div class="dsub">AUM ¬∑ ‚Üë7% FY2024</div>
    </div>
    <div class="dcard">
      <div class="dico">üõ°Ô∏è</div>
      <h3>PSG Insure</h3>
      <p>Non-life and life insurance via Western National. Won non-life commercial insurer of the year at FIA Awards two years running ‚Äî despite significant catastrophe events.</p>
      <div class="dstat">R7.6B</div><div class="dsub">Gross Written Premiums ¬∑ ‚Üë9% FY2025</div>
    </div>
  </div>
</section>

<!-- AI INSIGHTS -->
<section class="section ai-insights-section">
  <div class="s-label">AI Analysis</div>
  <div class="s-title fade-in">What the data<br>actually reveals.</div>

  <button class="ai-insight-trigger fade-in" onclick="generateInsights()" id="insightBtn">
    <div class="ai-dot"></div>
    Generate AI-Powered BA Insights
  </button>

  <div class="insights-container" id="insightsContainer">
    <div class="insight-card" id="ic1">
      <div class="ic-num">01</div>
      <h4>Technology Transformation</h4>
      <p>PSG increased tech & infrastructure spend by 13% in FY2024, fully expensed. This signals active digital transformation ‚Äî a prime environment for BAs to bridge business requirements with technical delivery across 260+ adviser offices.</p>
    </div>
    <div class="insight-card" id="ic2">
      <div class="ic-num">02</div>
      <h4>Adviser Network Scalability</h4>
      <p>With a continuously expanding adviser network, standardising workflows and SLA frameworks across distributed offices is a clear BA opportunity. Process mapping and gap analysis could drive significant operational efficiency.</p>
    </div>
    <div class="insight-card" id="ic3">
      <div class="ic-num">03</div>
      <h4>Graduate Talent Pipeline</h4>
      <p>PSG onboarded 152 new graduates in FY2024. Mapping the onboarding and training journey ‚Äî requirements gathering from HR and the business ‚Äî is a tangible BA deliverable with measurable ROI in reduced time-to-productivity.</p>
    </div>
    <div class="insight-card" id="ic4">
      <div class="ic-num">04</div>
      <h4>Client Retention Intelligence</h4>
      <p>R23B in net client inflows depends on retention as much as acquisition. SQL and Power BI dashboards tracking adviser performance, client engagement frequency, and early churn signals would directly support PSG's advice-led model.</p>
    </div>
  </div>
</section>

<!-- CONCLUSION -->
<div class="conclusion">
  <blockquote class="fade-in">
    "PSG's <span>13-year consecutive earnings growth</span> isn't coincidence ‚Äî it's an advice-led model that depends on people, process, and data working in concert. That's exactly the intersection a Business Analyst lives in."
  </blockquote>
  <cite class="fade-in">Analysis by Savanna Alexander ¬∑ BCom Information Systems, UCT ¬∑ Harvard Certified Data Scientist</cite>
</div>

<footer>
  <p>Data from PSG Financial Services annual reports, SENS announcements & investor relations disclosures. FY ends 28/29 February.</p>
  <p>Built by <a href="mailto:sav.alexander1@gmail.com">Savanna Alexander</a></p>
</footer>

<!-- CHAT OVERLAY -->
<div class="chat-overlay" id="chatOverlay">
  <div class="chat-box">
    <div class="chat-header">
      <div class="chat-header-left">
        <div class="chat-ai-dot"></div>
        <div>
          <h3>Ask the Analyst</h3>
          <p>Powered by Claude ¬∑ PSG Financial Intelligence</p>
        </div>
      </div>
      <button class="chat-close" onclick="closeChat()">√ó</button>
    </div>

    <div class="chat-messages" id="chatMessages">
      <div class="msg ai">
        <div class="msg-avatar">‚ú¶</div>
        <div class="msg-bubble">Hi! I'm an AI analyst with deep knowledge of PSG Financial Services ‚Äî their financials, strategy, divisions, and competitive position. What would you like to explore?</div>
      </div>
    </div>

    <div class="chat-suggestions" id="suggestions">
      <button class="suggestion-chip" onclick="sendSuggestion(this)">What drives PSG's AUM growth?</button>
      <button class="suggestion-chip" onclick="sendSuggestion(this)">How does PSG compare to competitors?</button>
      <button class="suggestion-chip" onclick="sendSuggestion(this)">Where could a BA add value at PSG?</button>
      <button class="suggestion-chip" onclick="sendSuggestion(this)">What are PSG's biggest risks?</button>
    </div>

    <div class="chat-input-row">
      <textarea class="chat-input" id="chatInput" placeholder="Ask anything about PSG..." rows="1"
        onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMessage();}"
        oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
      <button class="chat-send" id="sendBtn" onclick="sendMessage()">‚Üí</button>
    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ CHART SETUP ‚îÄ‚îÄ‚îÄ
Chart.defaults.color = '#7a8ea8';
Chart.defaults.borderColor = 'rgba(255,255,255,0.05)';
Chart.defaults.font.family = "'DM Sans', sans-serif";
const gold = '#c9a84c', goldFill = 'rgba(201,168,76,0.12)';
const green = '#3dbf82', greenFill = 'rgba(61,191,130,0.12)';

new Chart(document.getElementById('revChart'), {
  type: 'bar',
  data: {
    labels: ['FY2021','FY2022','FY2023','FY2024'],
    datasets: [{ data: [4180,4690,5349,5910], backgroundColor: [goldFill,goldFill,goldFill,gold], borderColor: gold, borderWidth: 1, borderRadius: 3 }]
  },
  options: { responsive: true, plugins: { legend: { display: false } },
    scales: { y: { ticks: { callback: v => 'R'+(v/1000).toFixed(1)+'B' }, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { grid: { display: false } } }
  }
});

new Chart(document.getElementById('aumChart'), {
  type: 'line',
  data: {
    labels: ['FY2021','FY2022','FY2023','FY2024','FY2025'],
    datasets: [{ data: [248,290,354,407,471], borderColor: green, backgroundColor: greenFill, fill: true, tension: 0.4, pointBackgroundColor: green, pointRadius: 4 }]
  },
  options: { responsive: true, plugins: { legend: { display: false } },
    scales: { y: { ticks: { callback: v => 'R'+v+'B' }, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { grid: { display: false } } }
  }
});

new Chart(document.getElementById('earnChart'), {
  type: 'bar',
  data: {
    labels: ['FY2022','FY2023','FY2024','FY2025'],
    datasets: [{ data: [795,950,1034,1272], backgroundColor: [goldFill,goldFill,goldFill,gold], borderColor: gold, borderWidth: 1, borderRadius: 3 }]
  },
  options: { responsive: true, plugins: { legend: { display: false } },
    scales: { y: { ticks: { callback: v => 'R'+v+'M' }, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { grid: { display: false } } }
  }
});

new Chart(document.getElementById('roeChart'), {
  type: 'line',
  data: {
    labels: ['FY2022','FY2023','FY2024','FY2025'],
    datasets: [{ data: [20.1,21.8,23.4,26.6], borderColor: gold, backgroundColor: goldFill, fill: true, tension: 0.4, pointBackgroundColor: gold, pointRadius: 4 }]
  },
  options: { responsive: true, plugins: { legend: { display: false } },
    scales: { y: { min: 18, ticks: { callback: v => v+'%' }, grid: { color: 'rgba(255,255,255,0.04)' } }, x: { grid: { display: false } } }
  }
});

// ‚îÄ‚îÄ‚îÄ SCROLL ANIMATIONS ‚îÄ‚îÄ‚îÄ
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

// ‚îÄ‚îÄ‚îÄ PSG CONTEXT FOR AI ‚îÄ‚îÄ‚îÄ
const PSG_CONTEXT = `You are an expert financial analyst and business analyst specialising in PSG Financial Services (JSE:KST), South Africa's leading advice-based financial services group. 

KEY DATA:
- PSG Financial Services was founded 1998, listed on JSE as KST
- Three divisions: PSG Wealth, PSG Asset Management, PSG Insure
- FY2025: AUM R470.7B (‚Üë16%), Recurring headline earnings R1.27B (‚Üë23%), ROE 26.6%, Gross written premiums R7.6B (‚Üë9%)
- FY2024: AUM R406.9B (‚Üë15%), Revenue R5.91B (‚Üë10.5%), Net client inflows R23B, ROE 23.4%, Dividend ‚Üë17%, Tech spend ‚Üë13%, 152 new graduates hired
- PSG Wealth: R355.1B AUM (‚Üë16%), flagship division
- PSG Asset Management: R51.8B AUM (‚Üë7%), 5 Raging Bull Awards 2023, 2nd place SA Manager of Year
- PSG Insure (Western National): R7.6B gross written premiums, won FIA non-life commercial insurer of year 2 years running
- 260+ adviser offices across SA and Namibia
- 13 consecutive years of earnings growth
- 5-year revenue CAGR: ~12.4%
- Revenue history: FY2021 R4.18B, FY2022 R4.69B, FY2023 R5.35B, FY2024 R5.91B
- Earnings: FY2022 R795M, FY2023 R950M, FY2024 R1.034B, FY2025 R1.272B
- CEO: Francois Gouws
- Main competitors: Coronation, Allan Gray, Sanlam, Old Mutual, Discovery
- Strategy: advice-led, personal relationships, long-term client retention
- Technology: increasing investment in digital infrastructure, fully expensed

This teardown was built by Savanna Alexander, a BCom Information Systems graduate from UCT with expertise in SQL, Python, Power BI, SAP S/4 HANA, and BPMN process modelling, targeting a Junior Business Analyst role at PSG.

Answer questions clearly, confidently, and with specific data where possible. Be insightful about business analysis opportunities, strategic observations, and competitive dynamics. Keep responses concise but substantive (3-6 sentences typically). If asked about Savanna's fit for PSG, highlight her relevant skills warmly but accurately.`;

// ‚îÄ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ‚îÄ
let conversationHistory = [];

function openChat() {
  document.getElementById('chatOverlay').classList.add('open');
  document.getElementById('chatInput').focus();
}

function closeChat() {
  document.getElementById('chatOverlay').classList.remove('open');
}

document.getElementById('chatOverlay').addEventListener('click', function(e) {
  if (e.target === this) closeChat();
});

function sendSuggestion(btn) {
  document.getElementById('chatInput').value = btn.textContent;
  document.getElementById('suggestions').style.display = 'none';
  sendMessage();
}

function addMessage(role, content, isTyping = false) {
  const msgs = document.getElementById('chatMessages');
  const div = document.createElement('div');
  div.className = `msg ${role}`;
  const avatar = document.createElement('div');
  avatar.className = 'msg-avatar';
  avatar.textContent = role === 'ai' ? '‚ú¶' : 'S';
  const bubble = document.createElement('div');
  bubble.className = 'msg-bubble' + (isTyping ? ' typing' : '');
  if (isTyping) {
    bubble.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
  } else {
    bubble.textContent = content;
  }
  div.appendChild(avatar);
  div.appendChild(bubble);
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
  return div;
}

async function sendMessage() {
  const input = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');
  const text = input.value.trim();
  if (!text) return;

  input.value = '';
  input.style.height = 'auto';
  sendBtn.disabled = true;
  document.getElementById('suggestions').style.display = 'none';

  addMessage('user', text);

  conversationHistory.push({ role: 'user', content: text });

  const typingEl = addMessage('ai', '', true);

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: PSG_CONTEXT,
        messages: conversationHistory
      })
    });

    const data = await response.json();
    const reply = data.content?.[0]?.text || 'Sorry, I couldn\'t generate a response. Please try again.';

    typingEl.remove();
    addMessage('ai', reply);
    conversationHistory.push({ role: 'assistant', content: reply });

  } catch (err) {
    typingEl.remove();
    addMessage('ai', 'Something went wrong connecting to the AI. Please try again in a moment.');
  }

  sendBtn.disabled = false;
  input.focus();
}

// ‚îÄ‚îÄ‚îÄ AI INSIGHTS ‚îÄ‚îÄ‚îÄ
async function generateInsights() {
  const btn = document.getElementById('insightBtn');
  btn.disabled = true;
  btn.innerHTML = '<div class="ai-dot"></div> Generating insights...';

  const cards = ['ic1','ic2','ic3','ic4'];
  const topics = [
    'Technology & Digital Transformation opportunity for Business Analysts at PSG',
    'Adviser network scalability and process improvement opportunities at PSG',
    'Data-driven client retention and analytics opportunities at PSG',
    'Graduate talent pipeline and onboarding process improvement at PSG'
  ];

  for (let i = 0; i < cards.length; i++) {
    const card = document.getElementById(cards[i]);
    const numEl = card.querySelector('.ic-num');
    const h4 = card.querySelector('h4');
    const p = card.querySelector('p');

    const origTitle = h4.textContent;
    h4.textContent = 'Generating...';
    p.innerHTML = '<div class="insight-skeleton"></div><div class="insight-skeleton" style="width:80%"></div><div class="insight-skeleton" style="width:90%"></div>';

    try {
      const res = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 1000,
          system: PSG_CONTEXT,
          messages: [{
            role: 'user',
            content: `Generate a sharp, specific BA insight (2-3 sentences max) about: ${topics[i]}. Focus on concrete value a Business Analyst could add. Be specific with PSG data. Return JSON only: {"title": "short title", "insight": "2-3 sentence insight"}`
          }]
        })
      });

      const data = await res.json();
      const raw = data.content?.[0]?.text || '';
      const clean = raw.replace(/```json|```/g, '').trim();
      const parsed = JSON.parse(clean);
      h4.textContent = parsed.title;
      p.textContent = parsed.insight;

    } catch(e) {
      h4.textContent = origTitle;
      p.textContent = 'Could not generate insight at this time.';
    }

    await new Promise(r => setTimeout(r, 600));
  }

  btn.innerHTML = '<div class="ai-dot"></div> Regenerate Insights';
  btn.disabled = false;
}
</script>
</body>
</html>
